-- SCRIPT GERAL BR 2.0 (BETA)
-- Compatível Delta Executor

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")
local root = char:WaitForChild("HumanoidRootPart")

-- GUI BASE
local gui = Instance.new("ScreenGui")
gui.Name = "DeltaGeralHub"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- BOTÃO MENU PEQUENO
local menuBtn = Instance.new("TextButton")
menuBtn.Parent = gui
menuBtn.Size = UDim2.new(0,80,0,30)
menuBtn.Position = UDim2.new(0,20,0,200)
menuBtn.Text = "MENU"
menuBtn.Active = true
menuBtn.Draggable = true

-- MENU PRINCIPAL
local main = Instance.new("Frame")
main.Parent = gui
main.Size = UDim2.new(0,400,0,400)
main.Position = UDim2.new(0.5,-200,0.5,-200)
main.Visible = false
main.Active = true
main.Draggable = true

-- TÍTULO
local title = Instance.new("TextLabel")
title.Parent = main
title.Size = UDim2.new(1,0,0,30)
title.Text = "SCRIPT GERAL BR 2.0 (BETA)"
title.TextScaled = true
title.BackgroundColor3 = Color3.fromRGB(40,40,40)
title.TextColor3 = Color3.fromRGB(255,255,255)

-- Mostrar/ocultar menu e abrir aba Principal
local tabs = {}
local currentTab = nil

menuBtn.MouseButton1Click:Connect(function()
    if main.Visible then
        main.Visible = false
        for _,tab in pairs(tabs) do
            tab.Visible = false
        end
    else
        main.Visible = true
        if tabs["Principal"] then
            tabs["Principal"].Visible = true
            currentTab = tabs["Principal"]
        end
    end
end)
-- ===== ABAS =====
local abasNomes = {"Principal", "Visual", "Movimento"} -- Você pode adicionar mais
local tabsFrame = Instance.new("Frame")
tabsFrame.Parent = main
tabsFrame.Size = UDim2.new(0,400,0,30)
tabsFrame.Position = UDim2.new(0,0,0,30)
tabsFrame.BackgroundTransparency = 1

-- Criar botões de abas
for i, nome in ipairs(abasNomes) do
    local btn = Instance.new("TextButton")
    btn.Parent = tabsFrame
    btn.Size = UDim2.new(0,120,1,0)
    btn.Position = UDim2.new(0,(i-1)*130,0,0)
    btn.Text = nome
    btn.BackgroundColor3 = Color3.fromRGB(50,50,50)
    btn.TextColor3 = Color3.fromRGB(255,255,255)

    -- Criar frame da aba
    local abaFrame = Instance.new("Frame")
    abaFrame.Parent = main
    abaFrame.Size = UDim2.new(1,0,1,-60)
    abaFrame.Position = UDim2.new(0,0,0,60)
    abaFrame.Visible = false
    abaFrame.BackgroundTransparency = 1

    tabs[nome] = abaFrame

    -- Botão da aba ativa
    btn.MouseButton1Click:Connect(function()
        -- Ocultar todas
        for _,f in pairs(tabs) do
            f.Visible = false
        end
        abaFrame.Visible = true
        currentTab = abaFrame
    end)
end

-- ===== MINI MENU INVISIBILIDADE =====
local miniInvisFrame = Instance.new("Frame")
miniInvisFrame.Parent = gui
miniInvisFrame.Size = UDim2.new(0,200,0,50)
miniInvisFrame.Position = UDim2.new(0.5,-100,0.8,0)
miniInvisFrame.Visible = false
miniInvisFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)

local invisAxBtn = Instance.new("TextButton")
invisAxBtn.Parent = miniInvisFrame
invisAxBtn.Size = UDim2.new(0,80,0,25)
invisAxBtn.Position = UDim2.new(0,10,0,10)
invisAxBtn.Text = "AX"

local invisBxBtn = Instance.new("TextButton")
invisBxBtn.Parent = miniInvisFrame
invisBxBtn.Size = UDim2.new(0,80,0,25)
invisBxBtn.Position = UDim2.new(0,110,0,10)
invisBxBtn.Text = "BX"

local invisOn = false
local savedCFrame

-- Botão de ativar invisibilidade na aba "Visual"
local invisBtn = Instance.new("TextButton")
invisBtn.Parent = tabs["Visual"]
invisBtn.Size = UDim2.new(0,150,0,25)
invisBtn.Position = UDim2.new(0,10,0,10)
invisBtn.Text = "Ativar Invisibilidade"

invisBtn.MouseButton1Click:Connect(function()
    invisOn = not invisOn
    miniInvisFrame.Visible = invisOn

    for _,v in pairs(char:GetDescendants()) do
        if v:IsA("BasePart") then
            v.Transparency = invisOn and 1 or 0
        end
    end
end)

invisAxBtn.MouseButton1Click:Connect(function()
    if invisOn then
        savedCFrame = root.CFrame
    end
end)

invisBxBtn.MouseButton1Click:Connect(function()
    if invisOn and savedCFrame then
        root.CFrame = savedCFrame
    end
end)
-- ===== WALKSPEED =====
local wsOn = false

local wsBox = Instance.new("TextBox")
wsBox.Parent = tabs["Movimento"]
wsBox.Position = UDim2.new(0,10,0,10)
wsBox.Size = UDim2.new(0,100,0,25)
wsBox.Text = "18"

local wsBtn = Instance.new("TextButton")
wsBtn.Parent = tabs["Movimento"]
wsBtn.Position = UDim2.new(0,120,0,10)
wsBtn.Size = UDim2.new(0,80,0,25)
wsBtn.Text = "OFF"

wsBtn.MouseButton1Click:Connect(function()
	wsOn = not wsOn
	wsBtn.Text = wsOn and "ON" or "OFF"
end)

RunService.RenderStepped:Connect(function()
	if wsOn then
		humanoid.WalkSpeed = tonumber(wsBox.Text) or 18
	else
		humanoid.WalkSpeed = 18
	end
end)

-- ===== PULO INFINITO =====
local infJump = false

local jumpBtn = Instance.new("TextButton")
jumpBtn.Parent = tabs["Movimento"]
jumpBtn.Position = UDim2.new(0,10,0,50)
jumpBtn.Size = UDim2.new(0,120,0,25)
jumpBtn.Text = "PULO OFF"

jumpBtn.MouseButton1Click:Connect(function()
	infJump = not infJump
	jumpBtn.Text = infJump and "PULO ON" or "PULO OFF"
end)

UIS.JumpRequest:Connect(function()
	if infJump then
		humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

-- ===== GIRO VELOZ =====
local spinOn = false

local spinBox = Instance.new("TextBox")
spinBox.Parent = tabs["Movimento"]
spinBox.Position = UDim2.new(0,10,0,90)
spinBox.Size = UDim2.new(0,100,0,25)
spinBox.Text = "1"

local spinBtn = Instance.new("TextButton")
spinBtn.Parent = tabs["Movimento"]
spinBtn.Position = UDim2.new(0,120,0,90)
spinBtn.Size = UDim2.new(0,80,0,25)
spinBtn.Text = "OFF"

spinBtn.MouseButton1Click:Connect(function()
	spinOn = not spinOn
	spinBtn.Text = spinOn and "ON" or "OFF"
end)

RunService.RenderStepped:Connect(function(dt)
	if spinOn then
		local speed = tonumber(spinBox.Text) or 1
		root.CFrame = root.CFrame * CFrame.Angles(0, math.rad(360 * speed * dt), 0)
	end
end)

-- ===== NOCALIP (Opcional) =====
local noclipOn = false
local noclipBtn = Instance.new("TextButton")
noclipBtn.Parent = tabs["Movimento"]
noclipBtn.Position = UDim2.new(0,10,0,130)
noclipBtn.Size = UDim2.new(0,120,0,25)
noclipBtn.Text = "NOCOLIP OFF"

noclipBtn.MouseButton1Click:Connect(function()
	noclipOn = not noclipOn
	noclipBtn.Text = noclipOn and "NOCOLIP ON" or "NOCOLIP OFF"
end)

RunService.Stepped:Connect(function()
	if noclipOn then
		for _,v in pairs(char:GetDescendants()) do
			if v:IsA("BasePart") then
				v.CanCollide = false
			end
		end
	else
		for _,v in pairs(char:GetDescendants()) do
			if v:IsA("BasePart") then
				v.CanCollide = true
			end
		end
	end
end)

-- ===== ESP BOX + NOME (COR DO TIME) =====
local espOn = false
local espFolder = Instance.new("Folder", gui)
espFolder.Name = "ESP_BOX"

local espBtn = Instance.new("TextButton")
espBtn.Parent = tabs["Visual"]
espBtn.Position = UDim2.new(0,10,0,50)
espBtn.Size = UDim2.new(0,120,0,25)
espBtn.Text = "ESP OFF"

local function clearESP()
	for _,v in pairs(espFolder:GetChildren()) do
		v:Destroy()
	end
end

local function createESP(plr)
	if plr == player then return end
	if not plr.Character then return end
	if not plr.Character:FindFirstChild("HumanoidRootPart") then return end

	local hrp = plr.Character.HumanoidRootPart

	local box = Instance.new("BoxHandleAdornment")
	box.Adornee = hrp
	box.Size = Vector3.new(4,6,2)
	box.AlwaysOnTop = true
	box.ZIndex = 10
	box.Transparency = 0.5
	box.Parent = espFolder

	-- cor do time
	if plr.Team and plr.Team.TeamColor then
		box.Color3 = plr.Team.TeamColor.Color
	else
		box.Color3 = Color3.new(1,1,1)
	end

	local nameGui = Instance.new("BillboardGui")
	nameGui.Adornee = hrp
	nameGui.Size = UDim2.new(0,100,0,30)
	nameGui.StudsOffset = Vector3.new(0,4,0)
	nameGui.AlwaysOnTop = true
	nameGui.Parent = espFolder

	local nameLabel = Instance.new("TextLabel")
	nameLabel.Parent = nameGui
	nameLabel.Size = UDim2.new(1,0,1,0)
	nameLabel.BackgroundTransparency = 1
	nameLabel.Text = plr.Name
	nameLabel.TextScaled = true
	nameLabel.TextColor3 = box.Color3
	nameLabel.TextStrokeTransparency = 0
end

espBtn.MouseButton1Click:Connect(function()
	espOn = not espOn
	espBtn.Text = espOn and "ESP ON" or "ESP OFF"
	clearESP()
	if espOn then
		for _,plr in pairs(Players:GetPlayers()) do
			createESP(plr)
		end
	end
end)

Players.PlayerAdded:Connect(function(plr)
	if espOn then
		plr.CharacterAdded:Wait()
		task.wait(1)
		createESP(plr)
	end
end)
-- ===== BOTÕES DO TÍTULO =====

-- Botão minimizar menu (apenas título)
local minBtn = Instance.new("TextButton")
minBtn.Parent = title
minBtn.Size = UDim2.new(0,30,1,0)
minBtn.Position = UDim2.new(0.7,0,0,0)
minBtn.Text = "-"
minBtn.TextScaled = true
minBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
minBtn.TextColor3 = Color3.fromRGB(255,255,255)

minBtn.MouseButton1Click:Connect(function()
	for _,tab in pairs(tabs) do
		tab.Visible = false
	end
end)

-- Botão esconder menu (mostrar só título)
local hideBtn = Instance.new("TextButton")
hideBtn.Parent = title
hideBtn.Size = UDim2.new(0,30,1,0)
hideBtn.Position = UDim2.new(0.78,0,0,0)
hideBtn.Text = "°"
hideBtn.TextScaled = true
hideBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
hideBtn.TextColor3 = Color3.fromRGB(255,255,255)

hideBtn.MouseButton1Click:Connect(function()
	main.Size = UDim2.new(0,400,0,30)
	for _,tab in pairs(tabs) do
		tab.Visible = false
	end
end)

-- Botão fechar script (aviso)
local closeBtn = Instance.new("TextButton")
closeBtn.Parent = title
closeBtn.Size = UDim2.new(0,30,1,0)
closeBtn.Position = UDim2.new(0.86,0,0,0)
closeBtn.Text = "×"
closeBtn.TextScaled = true
closeBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
closeBtn.TextColor3 = Color3.fromRGB(255,255,255)

closeBtn.MouseButton1Click:Connect(function()
	local aviso = Instance.new("TextLabel")
	aviso.Parent = gui
	aviso.Size = UDim2.new(0,300,0,100)
	aviso.Position = UDim2.new(0.5,-150,0.5,-50)
	aviso.Text = "Tem certeza que deseja fechar?\nSim / Cancelar"
	aviso.TextScaled = true
	aviso.BackgroundColor3 = Color3.fromRGB(30,30,30)
	aviso.TextColor3 = Color3.fromRGB(255,255,255)

	local simBtn = Instance.new("TextButton")
	simBtn.Parent = aviso
	simBtn.Size = UDim2.new(0,80,0,25)
	simBtn.Position = UDim2.new(0.1,0,0.7,0)
	simBtn.Text = "Sim"

	local cancelarBtn = Instance.new("TextButton")
	cancelarBtn.Parent = aviso
	cancelarBtn.Size = UDim2.new(0,80,0,25)
	cancelarBtn.Position = UDim2.new(0.6,0,0.7,0)
	cancelarBtn.Text = "Cancelar"

	simBtn.MouseButton1Click:Connect(function()
		-- Resetar todas funções
		humanoid.WalkSpeed = 18
		infJump = false
		spinOn = false
		noclipOn = false
		espOn = false
		clearESP()
		invisOn = false
		for _,v in pairs(char:GetDescendants()) do
			if v:IsA("BasePart") then
				v.Transparency = 0
				v.CanCollide = true
			end
		end

		gui:Destroy()
	end)

	cancelarBtn.MouseButton1Click:Connect(function()
		aviso:Destroy()
	end)
end)
-- ===== MELHORIAS VISUAIS =====

-- Função para hover nos botões
local function addHover(button)
	button.MouseEnter:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(100,100,100)
	end)
	button.MouseLeave:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(50,50,50)
	end)
end

-- Aplicar hover em todos os botões do main
for _, obj in pairs(main:GetDescendants()) do
	if obj:IsA("TextButton") then
		addHover(obj)
	end
end

-- Fade in do menu ao abrir
main.Visible = false
local function fadeIn(frame)
	frame.Visible = true
	for i=0,1,0.1 do
		frame.BackgroundTransparency = 1-i
		wait(0.03)
	end
end

menuBtn.MouseButton1Click:Connect(function()
	if main.Visible then
		-- fechar
		main.Visible = false
		for _,tab in pairs(tabs) do
			tab.Visible = false
		end
	else
		-- abrir com fade
		fadeIn(main)
		if tabs["Principal"] then
			tabs["Principal"].Visible = true
			currentTab = tabs["Principal"]
		end
	end
end)

-- Fade de mini menu invisibilidade
local function fadeMiniMenu(show)
	if show then
		miniInvisFrame.Visible = true
		for i=0,1,0.2 do
			miniInvisFrame.BackgroundTransparency = 1-i
			wait(0.03)
		end
	else
		for i=0,1,0.2 do
			miniInvisFrame.BackgroundTransparency = i
			wait(0.03)
		end
		miniInvisFrame.Visible = false
	end
end

-- Atualizar fade ao ativar invisibilidade
invisBtn.MouseButton1Click:Connect(function()
	invisOn = not invisOn
	fadeMiniMenu(invisOn)

	for _,v in pairs(char:GetDescendants()) do
		if v:IsA("BasePart") then
			v.Transparency = invisOn and 1 or 0
		end
	end
end)
-- ===== PARTE VISUAL / CONFIGURAÇÕES =====
-- Cria a aba "Visual" se ainda não existir
local visualTabName = "Visual"
if not tabs[visualTabName] then
	local abaFrame = Instance.new("Frame")
	abaFrame.Parent = main
	abaFrame.Size = UDim2.new(1,0,1,-60)
	abaFrame.Position = UDim2.new(0,0,0,60)
	abaFrame.Visible = false
	abaFrame.BackgroundTransparency = 1
	tabs[visualTabName] = abaFrame
end

local visualTab = tabs[visualTabName]

-- Título para a aba
local titleVisual = Instance.new("TextLabel")
titleVisual.Parent = visualTab
titleVisual.Size = UDim2.new(1,0,0,30)
titleVisual.Position = UDim2.new(0,0,0,0)
titleVisual.Text = "Configurações de Visual"
titleVisual.TextScaled = true
titleVisual.BackgroundTransparency = 1
titleVisual.TextColor3 = Color3.fromRGB(255,255,255)
titleVisual.TextStrokeTransparency = 0
titleVisual.TextStrokeColor3 = Color3.fromRGB(0,0,0)

-- Função para criar botões de cor
local function criarBotaoCor(nome, posY, corPadrao)
	local btn = Instance.new("TextButton")
	btn.Parent = visualTab
	btn.Size = UDim2.new(0,150,0,25)
	btn.Position = UDim2.new(0,10,0,posY)
	btn.Text = nome
	btn.BackgroundColor3 = corPadrao
	btn.TextColor3 = Color3.fromRGB(255,255,255)
	btn.TextStrokeTransparency = 0
	btn.TextStrokeColor3 = Color3.fromRGB(0,0,0)
	addHover(btn)
	return btn
end

-- Botão para mudar cor do menu principal
local btnCorMenu = criarBotaoCor("Cor do Menu", 50, main.BackgroundColor3)
btnCorMenu.MouseButton1Click:Connect(function()
	-- Exemplo de cor aleatória para teste
	local novaCor = Color3.fromHSV(math.random(), 0.7, 0.9)
	main.BackgroundColor3 = novaCor
end)

-- Botão para mudar cor das abas
local btnCorAbas = criarBotaoCor("Cor das Abas", 90, Color3.fromRGB(70,130,180))
btnCorAbas.MouseButton1Click:Connect(function()
	local novaCor = Color3.fromHSV(math.random(), 0.7, 0.9)
	for _, nome in ipairs(abasNomes) do
		local btn = tabsFrame:FindFirstChild(nome)
		if btn then
			btn.BackgroundColor3 = novaCor
		end
	end
end)

-- Botão para mudar cor dos botões da aba Visual
local btnCorBotoes = criarBotaoCor("Cor Botões", 130, Color3.fromRGB(50,50,50))
btnCorBotoes.MouseButton1Click:Connect(function()
	local novaCor = Color3.fromHSV(math.random(), 0.7, 0.9)
	for _, child in pairs(visualTab:GetChildren()) do
		if child:IsA("TextButton") then
			child.BackgroundColor3 = novaCor
		end
	end
end)
